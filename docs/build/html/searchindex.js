Search.setIndex({"alltitles": {"Apply RNA2seg on spatial data": [[4, "Apply-RNA2seg-on-spatial-data"]], "Citation": [[0, "citation"]], "Contents": [[0, "contents"]], "Import": [[5, "Import"]], "Indices and tables": [[0, "indices-and-tables"]], "Initialize Dataloaders": [[5, "Initialize-Dataloaders"]], "Initialize a RNA2segDataset": [[5, "Initialize-a-RNA2segDataset"]], "Initilize RNA2seg Model": [[5, "Initilize-RNA2seg-Model"]], "Installation Guide": [[1, "installation-guide"]], "Modules": [[2, "modules"]], "Step 1: Create patches from Zarr files": [[4, "Step-1:-Create-patches-from-Zarr-files"]], "Step 1: Create training patches from Zarr files": [[5, "Step-1:-Create-training-patches-from-Zarr-files"]], "Step 2: Create a Consistent Target for Training RNA2seg": [[5, "Step-2:-Create-a-Consistent-Target-for-Training-RNA2seg"]], "Step 2: Initialize a RNA2segDataset": [[4, "Step-2:-Initialize-a-RNA2segDataset"]], "Step 3: Initialize a model RNA2seg": [[4, "Step-3:-Initialize-a-model-RNA2seg"]], "Step 3: Training RNA2seg": [[5, "Step-3:-Training-RNA2seg"]], "Step 4: Run segmentation": [[4, "Step-4:-Run-segmentation"]], "Step 5: Visualize segmentation": [[4, "Step-5:-Visualize-segmentation"]], "Support": [[0, "support"]], "Train / Validataion split": [[5, "Train-/-Validataion-split"]], "Training RNA2seg": [[5, "Training-RNA2seg"]], "Training RNA2seg on Zarr-Saved SpatialData": [[5, "Training-RNA2seg-on-Zarr-Saved-SpatialData"]], "User guide": [[6, "user-guide"]], "Welcome to RNA2seg\u2019s documentation!": [[0, "welcome-to-rna2seg-s-documentation"]]}, "docnames": ["index", "install", "module_rna2seg", "notebook/apply_model_on_crops", "notebook/apply_model_on_zarr", "notebook/train_model_on_zarr", "userguide"], "envversion": {"nbsphinx": 4, "sphinx": 61, "sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1}, "filenames": ["index.rst", "install.rst", "module_rna2seg.rst", "notebook/apply_model_on_crops.ipynb", "notebook/apply_model_on_zarr.ipynb", "notebook/train_model_on_zarr.ipynb", "userguide.rst"], "indexentries": {}, "objects": {"rna2seg.dataset_zarr": [[2, 0, 1, "", "RNA2segDataset"]], "rna2seg.dataset_zarr.RNA2segDataset": [[2, 1, 1, "", "__init__"], [2, 1, 1, "", "set_threshold"]], "rna2seg.dataset_zarr.patches": [[2, 2, 1, "", "create_patch_rna2seg"]], "rna2seg.models": [[2, 0, 1, "", "RNA2seg"]], "rna2seg.models.RNA2seg": [[2, 1, 1, "", "__init__"], [2, 1, 1, "", "encode"], [2, 1, 1, "", "forward"], [2, 1, 1, "", "load_model"], [2, 1, 1, "", "run"], [2, 1, 1, "", "save_model"]]}, "objnames": {"0": ["py", "class", "Python class"], "1": ["py", "method", "Python method"], "2": ["py", "function", "Python function"]}, "objtypes": {"0": "py:class", "1": "py:method", "2": "py:function"}, "terms": {"": [2, 4, 5], "0": [2, 4, 5], "00": [4, 5], "001": 5, "01": [4, 5], "012377103169759": 5, "0180362065633135": 5, "02": 5, "032752990722656": 5, "04": 5, "05": 2, "06": 5, "0795408089955645": 5, "1": [0, 2, 6], "10": 5, "100": [4, 5], "10378": 4, "1200": [2, 4, 5], "123": 0, "128": 2, "130": 0, "133564313252767": 5, "15": 4, "150": 4, "16it": 5, "1740842660268145": 5, "19": 5, "2": [0, 2, 6], "20": 5, "200": 2, "2000": [2, 4], "2025": 0, "21": 5, "21it": 5, "22": 5, "23": 5, "24": 5, "24it": 4, "25": [], "255": 4, "256": 2, "26": 5, "27": [], "28145170211792": 5, "3": [0, 2, 6], "30": [2, 5], "3000": 4, "32": 2, "33": 5, "3617": 4, "39": [4, 5], "39it": 5, "4": [0, 2, 5, 6], "4000": 4, "42": 5, "43": 5, "46": [4, 5], "48": 5, "4933": 4, "498080": 5, "5": [0, 2, 5, 6], "50": [0, 5], "512": [4, 5], "51it": 4, "52": 5, "53": 5, "5406501293182373": 5, "57": 5, "58": 4, "58it": 4, "6": 5, "613": 4, "64": [2, 4, 5], "6595205465952554": 5, "65it": 4, "67": 5, "7": 5, "7041075229644775": 5, "75": 4, "8": 5, "81": 4, "86": 5, "9": [2, 4, 5], "91": 5, "93": 5, "9352603753407798": 5, "94": 5, "9420": 4, "95": 5, "9927518367767334": 5, "A": [2, 4, 5], "If": [0, 2], "In": [4, 5], "It": [0, 1, 2], "No": [4, 5], "The": [2, 4, 5], "Then": 1, "These": 2, "_": [4, 5], "__init__": [0, 2], "about": 0, "accept": 2, "accepted_nb_nuclei_per_cel": 5, "account": 2, "accuraci": 0, "activ": 1, "ad": [2, 4], "adamw": 5, "adaptornet": 2, "addition_mod": 2, "address": 0, "adjac": 2, "after": 2, "afterward": [], "albument": [2, 4, 5], "alias": 2, "alic": [0, 4, 5], "all": 2, "allow": [4, 5], "along": [0, 2], "alreadi": 2, "also": 2, "altern": 2, "although": [], "an": [0, 2, 4, 5], "analysi": 0, "ani": [0, 2], "annot": 5, "anoth": [], "anthoni": 0, "appli": [0, 2, 5, 6], "applic": 2, "apply_model_on_zarr": 5, "ar": [2, 4, 5], "arbitrari": 0, "architectur": 2, "area": 2, "arg": 2, "argument": 2, "arrai": 2, "array_coord": 2, "articl": 0, "assertionerror": 2, "augment_rna_dens": 2, "augmentation_img": 2, "author": 0, "avoid": [2, 4], "ax": 4, "axi": 4, "back": 5, "backbon": 2, "backend": 5, "background": 2, "backpropag": 2, "base": [0, 2], "batch": 2, "batch_siz": 5, "befor": 1, "best": 4, "best_val_loss": 5, "between": [2, 5], "bin": 1, "blond": [], "blondel": 0, "bool": 2, "both": 2, "bound": [2, 4, 5], "boundari": [0, 2, 4], "built": 0, "call": [], "can": [0, 2], "cannot": 2, "care": [], "case": [], "cell": [0, 2, 4, 5], "cell_segment": [4, 5], "cellbound1": [4, 5], "cellbound1_consist": 5, "cellbound_flow_threshold": [2, 4, 5], "cellbound_prob": 5, "cellpos": 2, "challeng": 0, "channel": [0, 2], "channelinvariantnet": [4, 5], "channels_cellbound": [2, 4, 5], "channels_dapi": [2, 4, 5], "check": [0, 4, 5], "cite": 0, "class": 2, "clip": 4, "coauthor": [], "code": 4, "coleon": 0, "collate_fn": 5, "com": [], "combin": 2, "comment": [], "compat": 2, "compos": [2, 4, 5], "comput": [2, 5], "compute_consistent_cel": 5, "concaten": 2, "configur": 2, "conflict": 4, "consid": 2, "consist": [0, 2, 6], "contain": 2, "continu": [4, 5], "convolut": 2, "coordin": [2, 4, 5], "correspond": [4, 5], "cpnet": [4, 5], "cpu": [2, 4, 5], "creat": [0, 1, 2, 6], "create_patch_rna2seg": [0, 2, 4, 5], "creation": 5, "csv": [2, 4, 5], "cuda": [2, 5], "curat": 5, "custom_collate_fn": 5, "cv2": [4, 5], "dapi": [2, 4, 5], "dapi_consist": 5, "data": [0, 2, 5, 6], "dataload": 0, "dataset": [2, 4, 5], "dataset_zarr": [2, 4, 5], "de": 0, "deep": [0, 2], "defard": 0, "defard1": [], "default": [2, 4], "defin": [0, 2], "demonstr": 5, "densiti": 5, "density_threshold": [2, 5], "depend": 1, "design": 0, "detect": 2, "devic": [2, 4, 5], "dia": 0, "diamet": 2, "dict": 2, "dict_gene_valu": 2, "dict_kei": 5, "dictionari": 2, "differ": [], "dimens": 2, "directori": [2, 4, 5], "distribut": 0, "divid": [4, 5], "document": [4, 5], "downsampl": 2, "due": 0, "dure": 2, "e": 2, "each": [2, 4, 5], "effici": [4, 5], "either": 2, "elif": 5, "els": 5, "enabl": 0, "encod": [0, 2], "enhanc": 0, "ensur": [4, 5], "entir": [4, 5], "env": 1, "environ": 1, "epoch_index": 5, "erron": 5, "error": 4, "evalu": 2, "evaluation_mod": 2, "everi": [], "exist": 2, "expect": 2, "experiment_nam": 2, "express": 2, "extract": [4, 5], "f": 5, "fals": [2, 5], "fig": 4, "figsiz": 4, "file": [0, 2, 6], "filenam": 2, "filter": [2, 5], "filterwarn": [4, 5], "fine": 5, "firstnam": [], "fish": [], "five": 4, "flexibl": [], "float": [2, 4], "florian": 0, "flow": 2, "flow_threshold": [2, 4, 5], "folder": [], "folder_patch_rna2seg": [2, 4, 5], "follow": [2, 4], "format": [4, 5], "former": [], "forward": [0, 2], "four": 5, "from": [0, 2, 6], "full": 2, "function": 2, "further": [0, 4, 5], "futur": 5, "g": 2, "gaussian": 2, "gene": [2, 4, 5], "gene2index": 2, "gene_column": [2, 4, 5], "gener": [2, 4, 5], "generalist": 0, "geodatafram": 2, "get": 4, "get_rna_img": 4, "get_segmentation_img": 4, "get_staining_img": 4, "github": 0, "goal": 5, "got": 4, "guid": 0, "guilherm": 0, "handl": 2, "have": 0, "height": [4, 5], "high": 5, "hook": [], "how": [0, 5], "http": [], "i": [0, 1, 2, 4, 5], "identifi": 2, "idx": 5, "ignor": [4, 5], "imag": [0, 2, 4, 5], "image_kei": [2, 4, 5], "img": 2, "img_cellbound": [2, 5], "import": [0, 4, 6], "improv": 0, "imshow": 4, "includ": 2, "inconsist": 5, "independ": 2, "index": [0, 4], "indic": 2, "individu": 2, "inf": 5, "inform": [0, 4, 5], "initi": [0, 2, 6], "initiais": [4, 5], "initil": 0, "input": [2, 4, 5], "input_dict": [2, 4], "input_target_rna2seg": 2, "instal": 0, "instanc": [], "instead": 2, "int": [2, 5], "integ": 4, "integr": 0, "inter_nearest": [4, 5], "interpol": [4, 5], "invalid": 2, "ipynb": 5, "is_avail": 5, "isol": 1, "issu": 0, "ist": 0, "its": 1, "journal": 0, "kei": [2, 5], "kept": 2, "kernel": 2, "kernel_s": 2, "kernel_size_background_dens": [2, 5], "kernel_size_rna2img": [2, 5], "key_cel": 4, "key_cell_consist": [2, 5], "key_cell_segment": 5, "key_nuclei_consist": 5, "key_nuclei_segment": [2, 5], "key_nucleus_consist": [2, 5], "key_segment": 4, "key_shape_cell_seg": 5, "key_shape_nuclei_seg": 5, "key_transcript": 4, "kwarg": 2, "latter": [], "layer": 2, "learn": [0, 2], "len": [4, 5], "librari": 0, "limit": 4, "list": 2, "list_all_cel": 4, "list_annotation_patch": 2, "list_gen": 2, "list_patch_index": 2, "load": [2, 4, 5], "load_model": [0, 2], "loss": 5, "low": 0, "lr": 5, "lt": [4, 5], "m": 1, "main": [4, 5], "manag": [2, 4, 5], "map": 2, "marker": 0, "mask": [2, 5], "mask_flow": 5, "mask_gradi": 5, "matplotlib": 4, "max": 2, "max_cell_nb_intersecting_nuclei": 5, "max_filter_size_rna2img": [2, 5], "max_nb_crop": 2, "maximum": 2, "melo": 0, "membran": [0, 2], "merfish_zarr_path": [4, 5], "method": [0, 2], "min_area": 2, "min_cell_s": 2, "min_nb_cell_per_patch": 2, "min_transcript": 2, "min_transcripts_per_patch": [2, 4, 5], "minimum": 2, "mode": 2, "model": [0, 2, 6], "model_select": 5, "modifi": 5, "modul": [0, 4, 5], "more": [], "mp": 5, "mueller": 0, "must": 2, "n_inv_chan": 2, "name": [0, 2, 4, 5], "nb_channel_rna": 2, "nb_rna_channel": 2, "nbase": 2, "need": [], "neither": 2, "net": [2, 4, 5], "network": 2, "none": [2, 5], "nor": 2, "notebook": [4, 5], "nout": 2, "now": [1, 4, 5], "np": [2, 5], "nuclear": 0, "nuclei": [2, 5], "nucleu": 5, "num_work": 5, "number": [0, 2, 4, 5], "numpi": 5, "object": 2, "off": 4, "old": 2, "one": 2, "onli": 2, "open": 0, "optim": 5, "option": 2, "order": 2, "other": 2, "out": [0, 5], "output": [2, 5], "overlap": [2, 4, 5], "overrid": 2, "overridden": [], "overwrit": [2, 4, 5], "packag": 0, "page": 0, "param": [], "paramet": [2, 4, 5], "particularli": 0, "pass": 2, "patch": [0, 2, 6], "patch_dir": [2, 4, 5], "patch_index": 5, "patch_overlap": [2, 4, 5], "patch_width": [2, 4, 5], "path": [2, 4, 5], "path_save_model": 5, "path_temp_sav": [2, 4], "pathlib": [4, 5], "per": [], "percentile_threshold": 2, "perform": [], "pip": 1, "pixel": 2, "pleas": 0, "plot": 4, "plt": 4, "point": 2, "points_kei": [2, 4, 5], "potenti": 5, "pre": 2, "precomput": [2, 4, 5], "predict": 2, "present": 4, "preserv": [4, 5], "pretrain": 2, "pretrained_model": [2, 4, 5], "print": [4, 5], "print_loss_everi": 5, "probabl": 2, "process": [0, 2, 4, 5], "project": [], "provid": 2, "pt": 4, "pyplot": 4, "python": 1, "qualiti": [0, 5], "quant": [], "question": 0, "r": 1, "rais": 2, "random_st": 5, "rang": [4, 5], "read_zarr": [4, 5], "readi": 1, "reason": [4, 5], "recip": [], "recommend": 1, "recompute_flow": 2, "refer": [], "refin": 5, "region": 0, "regist": [], "rel": 0, "relev": 2, "reli": 0, "remov": 5, "remove_cell_in_background_threshold": 2, "remove_nucleus_seg_from_bg": 2, "replac": 2, "repres": 2, "requir": [1, 2], "resiz": [4, 5], "resolv": 4, "result": [2, 4], "retain": 2, "return": 2, "return_agg_segment": 2, "return_df": 2, "return_flow": 2, "rgb": 4, "rna": [0, 2, 4], "rna2seg": [2, 6], "rna2seg_test": 4, "rna2segdataset": [0, 2, 6], "rna_img": [2, 5], "run": [0, 2, 6], "same": 2, "sampler": 5, "save": [0, 2, 4, 6], "save_model": [0, 2], "save_shapes2zarr": 4, "sd": [4, 5], "sdata": [2, 4, 5], "seamless": 0, "search": 0, "section": 0, "seg": 4, "segment": [0, 2, 5, 6], "segmentation_nuclei": 5, "segmentation_shape_nam": 4, "select": 4, "separ": 2, "set": [2, 4, 5], "set_threshold": [0, 2], "set_titl": 4, "shape": [2, 4, 5], "shape_patch_kei": [2, 4, 5], "should": 2, "show": 4, "shuffl": 5, "silent": [], "simultan": 2, "sinc": [], "singl": 2, "size": [2, 4, 5], "sklearn": 5, "sopa": [4, 5], "sopa_patches_rna2seg_": [4, 5], "sopa_patches_rna2seg_1200_150": 4, "sourc": 1, "spatial": [0, 2, 5, 6], "spatialdata": [0, 2, 4, 6], "split": 0, "spot": 2, "st_segment": 2, "stain": [0, 2, 4], "staining_id": 4, "staining_z3": [4, 5], "step": [0, 6], "store": [4, 5], "str": 2, "structur": 4, "subclass": [], "subplot": 4, "subsetrandomsampl": 5, "support": 2, "sure": 0, "sz": 2, "take": [], "taken": 2, "target": [0, 6], "tb_writer": 5, "teacher": 5, "tensor": 2, "test": 4, "test_mouse_ileum": [4, 5], "test_return_background": 2, "test_siz": 5, "them": 2, "thi": [0, 2, 4, 5], "thoma": 0, "three": 4, "threshold": [2, 5], "threshold_intersection_contain": 5, "threshold_intersection_intersect": 5, "through": 2, "time": 5, "titl": 0, "torch": [2, 5], "tqdm": [4, 5], "tradit": 0, "train": [0, 4, 6], "train_indic": 5, "train_one_epoch": 5, "train_sampl": 5, "train_test_split": 5, "training_load": 5, "training_mod": [2, 5], "transcipt": [4, 5], "transcript": [2, 4, 5], "transcriptom": [0, 2, 5], "transform": 2, "transform_dapi": 2, "transform_res": [2, 4, 5], "true": [2, 4, 5], "tune": 5, "tupl": 2, "two": [2, 5], "txt": 1, "type": 2, "unet": [2, 4, 5], "unreli": 5, "us": [0, 1, 2, 5], "usag": [], "use_cach": [2, 5], "user": [0, 4, 5], "util": [4, 5], "val_indic": 5, "valid": [4, 5], "valid_sampl": 5, "validataion": 0, "validation_load": 5, "valu": 2, "valueerror": 2, "variabl": 0, "venv": 1, "version": 2, "virtual": 1, "visual": [0, 6], "vmunet": [2, 4, 5], "volum": 0, "walter": 0, "warn": [4, 5], "we": [4, 5], "weight": 4, "weight_decai": 5, "when": 2, "where": 2, "whether": 2, "which": 4, "while": [2, 4, 5], "whole": 5, "width": [2, 4, 5], "within": 4, "workflow": 4, "xmax": 4, "xmin": 4, "year": 0, "ymax": 4, "ymin": 4, "you": [0, 2], "zarr": [0, 2, 6]}, "titles": ["Welcome to RNA2seg\u2019s documentation!", "Installation Guide", "Modules", "&lt;no title&gt;", "Apply RNA2seg on spatial data", "Training RNA2seg on Zarr-Saved SpatialData", "User guide"], "titleterms": {"": 0, "1": [4, 5], "2": [4, 5], "3": [4, 5], "4": 4, "5": 4, "appli": 4, "citat": 0, "consist": 5, "content": 0, "creat": [4, 5], "data": 4, "dataload": 5, "document": 0, "file": [4, 5], "from": [4, 5], "guid": [1, 6], "import": 5, "indic": 0, "initi": [4, 5], "initil": 5, "instal": 1, "model": [4, 5], "modul": 2, "notebook": [], "patch": [4, 5], "process": [], "rna2seg": [0, 4, 5], "rna2segdataset": [4, 5], "run": 4, "save": 5, "segment": 4, "spatial": 4, "spatialdata": 5, "split": 5, "step": [4, 5], "support": 0, "tabl": 0, "target": 5, "train": 5, "usag": [], "user": 6, "validataion": 5, "visual": 4, "welcom": 0, "zarr": [4, 5]}})